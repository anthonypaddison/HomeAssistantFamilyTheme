type: custom:week-planner-card
days: 5
startingDay: today
columns:
  extraLarge: 5
  large: 5
  medium: 5
  small: 5          # force 5 columns on small
  extraSmall: 5     # force 5 columns on extra-small
calendars:
  - entity: calendar.family
    color: var(--cal-color-family)
  - entity: calendar.anthony
    color: var(--cal-color-anthony)
  - entity: calendar.joy
    color: var(--cal-color-joy)
  - entity: calendar.lizzie
    color: var(--cal-color-lizzie)
  - entity: calendar.toby
    color: var(--cal-color-toby)
noCardBackground: false
card_mod:
  style: |
    :host {
      /* TUNE HERE */
      --hour-height: 64px;        /* px per hour; match the card’s internal grid */
      --rail-width:  56px;        /* left gutter width */
      --rail-pad-left: 10px;      /* inner padding for labels */
      --rail-top:    48px;        /* push first label below day headers */
      --rail-fsize:  12px;
      --rail-color:  var(--secondary-text-color);
    }

    /* Vertical scroll for the whole card */
    ha-card {
      max-height: calc(100vh - 220px);
      overflow-y: auto;
      overflow-x: hidden;           /* avoid accidental sideways scroll by default */
      overscroll-behavior: contain; /* nicer scrolling on touch devices */
    }

    /* Keep ALL 5 columns on the same line */
    ha-card .days {
      position: relative;
      padding-left: var(--rail-width); /* make room for the left time rail */
      display: flex;                   /* force one-row layout */
      flex-wrap: nowrap;               /* no wrapping to another row */
      gap: var(--ha-gutter, 0);

      /* Hour stripes (30m + 60m) */
      background-image:
        repeating-linear-gradient(
          to bottom,
          transparent 0px,
          transparent calc(var(--hour-height) / 2 - 1px),
          rgba(0,0,0,0.03) calc(var(--hour-height) / 2)
        ),
        repeating-linear-gradient(
          to bottom,
          transparent 0px,
          transparent calc(var(--hour-height) - 1px),
          rgba(0,0,0,0.06) var(--hour-height)
        );
      background-clip: padding-box;
    }

    /* Equal-width day columns that shrink instead of wrapping */
    ha-card .day {
      flex: 1 1 0;
      min-width: 0;
    }

    .day .header {
      font-weight: 700;
      color: var(--primary-text-color);
    }

    /* LEFT TIME RAIL — hour increments (06:00–22:00 shown) */
    ha-card .days::before {
      content:
        "06:00\A07:00\A08:00\A09:00\A10:00\A11:00\A12:00\A13:00\A14:00\A15:00\A16:00\A17:00\A18:00\A19:00\A20:00\A21:00\A22:00";
      white-space: pre;
      position: absolute;
      left: 0;
      top: var(--rail-top);
      width: calc(var(--rail-width) - 4px);
      padding-left: var(--rail-pad-left);
      text-align: left;
      line-height: var(--hour-height);
      font-size: var(--rail-fsize);
      color: var(--rail-color);
      pointer-events: none;
      z-index: 2;
    }

    /* OPTIONAL: on very narrow screens, allow horizontal scroll rather than squishing */
    @media (max-width: 900px) {
      ha-card {
        overflow-x: auto;              /* enable sideways scroll if needed */
      }
      ha-card .day {
        flex: 0 0 min(260px, 20vw);    /* sensible min width per day when scrolling */
      }
      /* If you prefer to hide the rail on very small screens, uncomment:
      ha-card .days { padding-left: 12px; }
      ha-card .days::before { display: none; }
      */
    }

    /* Fallback: if the card insists on grid, explicitly lock 5 columns */
    @supports (grid-template-columns: repeat(5, 1fr)) {
      ha-card .days[style*="display: grid"],
      ha-card .days.display-grid {
        grid-template-columns: repeat(5, 1fr) !important;
        grid-auto-flow: column !important;
      }
    }