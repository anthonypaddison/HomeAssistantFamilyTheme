type: custom:week-planner-card
days: 5
startingDay: today
columns:
  extraLarge: 5
  large: 5
  medium: 5
  small: 3
  extraSmall: 1
calendars:
  - entity: calendar.family
    color: var(--cal-color-family)
  - entity: calendar.anthony
    color: var(--cal-color-anthony)
  - entity: calendar.joy
    color: var(--cal-color-joy)
  - entity: calendar.lizzie
    color: var(--cal-color-lizzie)
  - entity: calendar.toby
    color: var(--cal-color-toby)
noCardBackground: false

card_mod:
  style: |
    :host {
      /* Tunables */
      --hour-height: 64px;        /* px per hour */
      --time-rail-width: 56px;    /* left gutter */
      --time-rail-left-pad: 10px; /* inner padding for labels */
      --time-rail-top:  48px;     /* push labels below headers */
      --time-rail-size: 12px;
      --time-rail-color: var(--secondary-text-color);
    }

    /* One scrollable container */
    ha-card {
      max-height: calc(100vh - 220px);
      overflow: auto;
      position: relative;  /* we'll anchor labels to the card */
    }

    /* Make space for the time rail; works whether there is a .days wrapper or not */
    ha-card .days { padding-left: var(--time-rail-width); }
    /* Fallback (some builds/nested layouts): also pad each column if needed */
    ha-card .day  { padding-left: var(--time-rail-width); }

    /* Hour & half-hour stripes on every day column (most robust target) */
    ha-card .day {
      background-image:
        repeating-linear-gradient(
          to bottom,
          transparent 0px,
          transparent calc(var(--hour-height) / 2 - 1px),
          rgba(0,0,0,0.03) calc(var(--hour-height) / 2)
        ),
        repeating-linear-gradient(
          to bottom,
          transparent 0px,
          transparent calc(var(--hour-height) - 1px),
          rgba(0,0,0,0.06) var(--hour-height)
        );
      background-clip: padding-box;
    }

    /* Left-hand time labels (always visible) */
    ha-card::before {
      content:
        "06:00\A07:00\A08:00\A09:00\A10:00\A11:00\A12:00\A13:00\A14:00\A15:00\A16:00\A17:00\A18:00\A19:00\A20:00\A21:00\A22:00";
      white-space: pre;
      position: absolute;
      left: var(--time-rail-left-pad);
      top: var(--time-rail-top);
      line-height: var(--hour-height);
      font-size: var(--time-rail-size);
      color: var(--time-rail-color);
      pointer-events: none;
      z-index: 1;
    }

    .day .header {
      font-weight: 700;
      color: var(--primary-text-color);
    }

    @media (max-width: 900px) {
      ha-card .days, ha-card .day { padding-left: 12px; }
      ha-card::before { display: none; }
    }