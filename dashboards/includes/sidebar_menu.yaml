type: custom:mod-card
view_layout: { grid-area: sidebar }
card_mod:
  style: |
    ha-card {
      background: var(--palette-lilac) !important;
      margin: 0 !important;
      border-radius: 0 !important;
      border: none !important;
      box-shadow: none !important;
      height: calc(100vh - var(--header-height)) !important;
      position: sticky; top: 0;
      padding: 0 !important;
      display: flex; flex-direction: column;
    }
card:
  type: vertical-stack
  cards:

    # Family logo/header at the very top
    - type: custom:button-card
      template: family_icon
      icon: mdi:home-heart
      show_name: false
      show_label: false
      styles:
        card:
          - background: transparent
          - box-shadow: none
          - border-radius: 0
          - width: 100%
          - height: auto
          - padding: 10% 0 6%
        icon:
          - color: "#FFFFFF"
          - width: 48px
          - height: 48px

    # Spacer so the top of the first button aligns with the bottom of chips row
    - type: custom:button-card
      show_icon: false
      show_name: false
      styles:
        card:
          - background: transparent
          - box-shadow: none
          - height: var(--top-rows-height, 112px)   # <== keep in sync with header+chips
          - padding: 0
          - margin: 0

    # Calendar
    - type: custom:button-card
      template: sb_icon_only
      icon: mdi:calendar
      variables:
        section: Calendar
        badge_entity: input_number.events_today
      tap_action:
        action: call-service
        service: input_select.select_option
        target: { entity_id: input_select.family_section }
        data: { option: Calendar }

    # Chores
    - type: custom:button-card
      template: sb_icon_only
      icon: mdi:broom
      variables:
        section: Chores
        badge_entity: sensor.chores_incomplete_total
      tap_action:
        action: call-service
        service: input_select.select_option
        target: { entity_id: input_select.family_section }
        data: { option: Chores }

    # Photos
    - type: custom:button-card
      template: sb_icon_only
      icon: mdi:image-multiple
      variables:
        section: Photos
      tap_action:
        action: call-service
        service: input_select.select_option
        target: { entity_id: input_select.family_section }
        data: { option: Photos }

    # Lists
    - type: custom:button-card
      template: sb_icon_only
      icon: mdi:format-list-bulleted
      variables:
        section: Lists
      tap_action:
        action: call-service
        service: input_select.select_option
        target: { entity_id: input_select.family_section }
        data: { option: Lists }

    # Push the kids to the bottom
    - type: custom:button-card
      show_icon: false
      show_name: false
      styles:
        card:
          - background: transparent
          - box-shadow: none
          - padding: 0
          - margin: 0
          - height: 0
          - flex-grow: 1   # spacer to push following items down

    # Toby
    - type: custom:button-card
      template: sb_icon_only
      icon: mdi:robot-happy-outline
      variables: { section: Toby }
      tap_action:
        action: call-service
        service: input_select.select_option
        target: { entity_id: input_select.family_section }
        data: { option: Toby }

    # Lizzie
    - type: custom:button-card
      template: sb_icon_only
      icon: mdi:unicorn-variant
      variables: { section: Lizzie }
      tap_action:
        action: call-service
        service: input_select.select_option
        target: { entity_id: input_select.family_section }
        data: { option: Lizzie }