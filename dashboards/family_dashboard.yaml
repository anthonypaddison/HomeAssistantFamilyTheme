title: Family
views:
  - title: Family
    icon: mdi:home-heart
    type: custom:grid-layout
    layout:
      grid-template-columns: 56px 1fr   # ← thin sidebar (56px) + main
      grid-template-rows: auto
      grid-template-areas: |
        "sidebar main"
    cards:

      # -- Sidebar (icon-only) ----------------------------
      - !include /config/dashboards/includes/sidebar_menu.yaml
        # Sidebar file sets its own area via view_layout

      # -- Main column ------------------------------------
      - type: vertical-stack
        view_layout: { grid-area: main }
        cards:

          # Top chips (unchanged, optional)
          - type: custom:mushroom-chips-card
            alignment: end
            chips:
              - type: template
                icon: mdi:calendar
                content: >
                  {{ states('input_select.calendar_view') if states('input_select.calendar_view') not in ['unknown','unavailable'] else '5-Day' }}
                double_tap_action:
                  action: call-service
                  service: input_select.select_next
                  target: { entity_id: input_select.calendar_view }

              - type: template
                icon: mdi:account-group
                content: "{{ states('todo.family') }} Family"
                style: "ha-card { background: var(--family-color-family); color: white; }"
              - type: template
                icon: mdi:account
                content: "{{ states('todo.anthony') }} Anthony"
                style: "ha-card { background: var(--family-color-anthony); color: white; }"
              - type: template
                icon: mdi:account
                content: "{{ states('todo.joy') }} Joy"
                style: "ha-card { background: var(--family-color-joy); color: black; }"
              - type: template
                icon: mdi:account
                content: "{{ states('todo.lizzie') }} Lizzie"
                style: "ha-card { background: var(--family-color-lizzie); color: white; }"
              - type: template
                icon: mdi:account
                content: "{{ states('todo.toby') }} Toby"
                style: "ha-card { background: var(--family-color-toby); color: white; }"

          # Main content switches by section
          - type: custom:state-switch
            entity: input_select.family_section
            default: Calendar
            states:

              Calendar:
                type: vertical-stack
                cards:
                  # Single unified 5-day calendar with grid overlay + scroll
                  - !include /config/dashboards/includes/calendar_5day.yaml

              Chores:
                type: grid
                columns: 2
                square: false
                cards:
                  - type: todo-list
                    entity: todo.family
                    title: "Family Chores"
                    display_order: duedate_asc
                    card_mod: { style: "ha-card { border-top: 4px solid var(--family-color-family); }" }
                  - type: todo-list
                    entity: todo.anthony
                    title: "Anthony"
                    card_mod: { style: "ha-card { border-top: 4px solid var(--family-color-anthony); }" }
                  - type: todo-list
                    entity: todo.joy
                    title: "Joy"
                    card_mod: { style: "ha-card { border-top: 4px solid var(--family-color-joy); }" }
                  - type: todo-list
                    entity: todo.lizzie
                    title: "Lizzie"
                    card_mod: { style: "ha-card { border-top: 4px solid var(--family-color-lizzie); }" }
                  - type: todo-list
                    entity: todo.toby
                    title: "Toby"
                    card_mod: { style: "ha-card { border-top: 4px solid var(--family-color-toby); }" }

              Lists:
                type: vertical-stack
                cards:
                  - type: todo-list
                    entity: todo.lists          # << set your actual lists project entity
                    title: "Family Lists (Packing, Shopping, Routines)"
                    display_order: alpha_asc

              Photos:
                type: picture-entity
                entity: camera.family_album    # << set your actual Local Photos camera if different
                show_name: false
                show_state: false
                card_mod:
                  style: |
                    ha-card { border-radius: 16px; overflow: hidden; }

          # Floating Action Button → opens a conditional popup (Browser Mod)
          - type: custom:fab-card
            icon: mdi:plus
            button_color: var(--accent-color)
            icon_color: white
            left: false
            # IMPORTANT: use a BROWSER call so popup opens only on THIS device. [6](https://github.com/thomasloven/hass-browser_mod/blob/master/documentation/services.md)
            action:
              action: fire-dom-event
              browser_mod:
                service: script.family_fab_open
                data:
                  browser_id: THIS