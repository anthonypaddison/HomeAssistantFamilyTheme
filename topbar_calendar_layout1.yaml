type: custom:bootstrap-grid-card
class: container-fluid g-0
cards:
  - type: row
    class: row align-items-center g-2
    cards:

      # 1) Day/Week/Month selector
      - type: entities
        class: col-3
        show_header_toggle: false
        entities:
          - entity: input_select.calendar_view
            name: View
        card_mod:
          style: |
            :host { --mdc-icon-size: 0 !important; --state-icon-color: transparent !important; }
            mdc-line-ripple { display: none !important; height: 0 !important; }
            ha-card { background: transparent !important; box-shadow: none !important; border: 0 !important; margin: 0 !important; padding: 0 !important; }

      # 2) Family name + time
      - type: row
        class: col-4 justify-content-center
        cards:
          - type: markdown
            content: "**Panogu Family**"
            card_mod:
              style: |
                ha-card { background: transparent; border: 0; box-shadow: none; margin: 0 8px 0 0; text-align: right; font-size: 1.75rem; }
          - type: custom:digital-clock
            timeFormat:
              hour: 2-digit
              minute: 2-digit
              dateFormat: cccc d LLLL yyyy
            card_mod:
              style: |
                ha-card { background: transparent; border: 0; box-shadow: none; margin: 0; text-align: left; }
                .first-line { font-size: 140% !important; font-weight: 600; }
                .second-line { font-size: 90% !important; color: var(--family-cal-header-color); }

      # 3) Tiny weather (edit entity if needed)
      - type: custom:button-card
        class: col-2
        entity: weather.home
        name: ' '
        show_state: false
        show_label: true
        label: >
          [[[
            const w = states['weather.home'];
            if (!w) return '-';
            const t = (w.attributes && w.attributes.temperature !== undefined) ? `${w.attributes.temperature}Â°` : '';
            const c = w.state ? w.state.replace('_',' ') : '';
            return `${t} ${c}`;
          ]]]
        icon: mdi:weather-partly-cloudy
        styles:
          card:
            - border-radius: 12px
            - box-shadow: none
            - padding: 6px 10px
            - background: var(--card-background-color)
            - justify-content: center
            - min-height: 44px
          icon:
            - width: 20px
            - color: var(--secondary-text-color)
          label:
            - font-size: 0.95rem
            - color: var(--primary-text-color)

      # 4) Legend (display-only)
      - type: markdown
        class: col-3
        content: >
          <div class="legend">
            <span class="dot family"></span> Family
            <span class="dot a"></span> A
            <span class="dot j"></span> J
            <span class="dot l"></span> L
            <span class="dot t"></span> T
          </div>
        card_mod:
          style: |
            ha-card { background: transparent; border: 0; box-shadow: none; margin: 0; }
            .legend { display: flex; justify-content: flex-end; gap: 10px; align-items: center; flex-wrap: wrap; }
            .legend .dot { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 6px; vertical-align: middle; }
            .legend .family { background: var(--family-color-family); }
            .legend .a      { background: var(--family-color-anthony); }
            .legend .j      { background: var(--family-color-joy); }
            .legend .l      { background: var(--family-color-lizzie); }
            .legend .t      { background: var(--family-color-toby); }