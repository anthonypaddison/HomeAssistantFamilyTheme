type: custom:mod-card
class: col-2 sidebarMenu
card_mod:
  style:
    .: |
      /* Smooth width transitions */
      .sidebarMenu,
      .mainPane {
        transition: flex-basis 180ms ease, max-width 180ms ease, width 180ms ease;
      }

      /* Compute widths based on the collapsed boolean */
      .sidebarMenu {
        /* col-1 = 8.333333%, col-2 = 16.666667% */
        flex: 0 0 [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? '8.333333%'
            : '16.666667%';
        ]]] !important;
        max-width: [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? '8.333333%'
            : '16.666667%';
        ]]] !important;
        width: [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? '8.333333%'
            : '16.666667%';
        ]]] !important;
      }

      .mainPane {
        /* 12 cols total -> remainder for right pane */
        flex: 0 0 [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? '91.666667%'   /* 11/12 */
            : '83.333333%';  /* 10/12 */
        ]]] !important;
        max-width: [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? '91.666667%'
            : '83.333333%';
        ]]] !important;
        width: [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? '91.666667%'
            : '83.333333%';
        ]]] !important;
      }
style: |
  ha-card {
    background: #EBF2F8;
    border-radius: 16px;
    padding:
      [[[
        return states['input_boolean.sidebar_collapsed']?.state === 'on' ? '6px' : '8px';
      ]]];
    height: 100%;
  }
card:
  type: vertical-stack
  cards:
    - type: custom:button-card
      icon: >
        [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? 'mdi:chevron-double-right'  // expand
            : 'mdi:chevron-double-left';  // collapse
        ]]]
      name: >
        [[[
          return states['input_boolean.sidebar_collapsed']?.state === 'on'
            ? 'Expand'
            : 'Collapse';
        ]]]
      show_name: false
      tap_action:
        action: call-service
        service: input_boolean.toggle
        target:
          entity_id: input_boolean.sidebar_collapsed
      styles:
        card:
          - box-shadow: none
          - background: transparent
          - margin: 0 0 4px 0
          - min-height: 36px
          - justify-content: center
        icon:
          - width: 22px
          - color: var(--secondary-text-color)

    # --- Calendar ---
    - type: custom:button-card
      template: sidebar_item
      variables: { section: Calendar }
      name: Calendar
      icon: mdi:calendar
      tap_action:
        action: call-service
        service: input_select.select_option
        target:
          entity_id: input_select.calendar_section
        service_data:
          option: Calendar

    # --- Chores ---
    - type: custom:button-card
      template: sidebar_item
      variables: { section: Chores }
      name: Chores
      icon: mdi:brush
      tap_action:
        action: call-service
        service: input_select.select_option
        target:
          entity_id: input_select.calendar_section
        service_data:
          option: Chores

    # --- Photos ---
    - type: custom:button-card
      template: sidebar_item
      variables: { section: Photos }
      name: Photos
      icon: mdi:image-multiple
      tap_action:
        action: call-service
        service: input_select.select_option
        target:
          entity_id: input_select.calendar_section
        service_data:
          option: Photos

    # --- Lists ---
    - type: custom:button-card
      template: sidebar_item
      variables: { section: Lists }
      name: Lists
      icon: mdi:format-list-bulleted
      tap_action:
        action: call-service
        service: input_select.select_option
        target:
          entity_id: input_select.calendar_section
        service_data:
          option: Lists