title: Panogu Family

# Templates are global to this dashboard (used by the sidebar include)
button_card_templates:
  sidebar_item:
    show_state: false
    # Prefer show_name templating (newer button-card), with CSS fallback in "name" styles
    show_name: >
      [[[
        return states['input_boolean.sidebar_collapsed']?.state !== 'on';
      ]]]
    styles:
      card:
        - border-radius: 12px
        - box-shadow: none
        - padding: >
            [[[
              // tighter padding when collapsed
              return states['input_boolean.sidebar_collapsed']?.state === 'on' ? '10px' : '10px 12px';
            ]]]
        - margin: 6px 0
        - justify-content: center
        - background: >
            [[[
              const s = variables?.section || '';
              const current = states['input_select.calendar_section']?.state;
              return current === s ? 'white' : 'transparent';
            ]]]
      grid:
        - grid-template-areas: >
            [[[
              // icon-only when collapsed
              return states['input_boolean.sidebar_collapsed']?.state === 'on' ? '"i"' : '"i n"';
            ]]]
        - grid-template-columns: >
            [[[
              return states['input_boolean.sidebar_collapsed']?.state === 'on' ? '1fr' : '28px 1fr';
            ]]]
        - grid-template-rows: min-content
      icon:
        - width: 24px
        - justify-self: center
        - color: >
            [[[
              const s = variables?.section || '';
              const current = states['input_select.calendar_section']?.state;
              return current === s ? 'var(--primary-color)' : 'var(--secondary-text-color)';
            ]]]
      name:
        # CSS fallback (older button-card) – hide when collapsed
        - display: >
            [[[
              return states['input_boolean.sidebar_collapsed']?.state === 'on' ? 'none' : 'block';
            ]]]
        - justify-self: start
        - padding-left: 6px
        - font-weight: 700
        - font-size: 1.05rem
        - color: >
            [[[
              const s = variables?.section || '';
              const current = states['input_select.calendar_section']?.state;
              return current === s ? 'var(--primary-text-color)' : 'var(--secondary-text-color)';
            ]]]

views:
  - title: Panogu Family
    path: panogu-family
    panel: true
    badges: []
    cards:
      - type: custom:bootstrap-grid-card
        class: container-fluid g-0
        cards:
          - type: row
            class: row g-3 align-items-stretch
            cards:

              # -------- LEFT SIDEBAR (single include; width controlled by card-mod) --------
              - !include sidebar_menu.yaml

              # -------- RIGHT AREA (top bars + content) --------
              - type: vertical-stack
                class: col-10 mainPane
                card_mod:
                  style: |
                    :host {
                      /* Complementary width to sidebar: 10/12 or 11/12 */
                      --_right-width: [[[
                        return states['input_boolean.sidebar_collapsed']?.state === 'on'
                          ? '91.666667%'   /* 11/12 */
                          : '83.333333%';  /* 10/12 */
                      ]]];
                      flex: 0 0 var(--_right-width) !important;
                      max-width: var(--_right-width) !important;
                      width: var(--_right-width) !important;
                      transition: flex-basis 180ms ease, max-width 180ms ease, width 180ms ease;
                    }
                cards:

                  # === TOP BARS ===

                  # Calendar → Top Bar Layout 1 (A)
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state: Calendar
                      - entity: input_select.calendar_header_layout
                        state: A
                    card: !include topbar_calendar_layout1.yaml

                  # Calendar → Top Bar Layout 2 (B)
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state: Calendar
                      - entity: input_select.calendar_header_layout
                        state: B
                    card: !include topbar_calendar_layout2.yaml

                  # Non-Calendar sections (Chores/Photos/Lists) → use Layout 2
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state_not: Calendar
                    card: !include topbar_calendar_layout2.yaml

                  # === SECTION CONTENT ===

                  # Calendar content
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state: Calendar
                    card: !include calendar_view.yaml

                  # Chores content
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state: Chores
                    card: !include chore_view.yaml

                  # Photos content
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state: Photos
                    card: !include photo_view.yaml

                  # Lists content
                  - type: conditional
                    conditions:
                      - entity: input_select.calendar_section
                        state: Lists
                    card: !include lists_view.yaml
