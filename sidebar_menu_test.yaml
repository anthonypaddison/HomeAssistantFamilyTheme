# sidebar_menu_diag_v3.yaml
# Purpose:
#  - Prove button-card renders (raw button)
#  - Prove template engine is active (intentional missing template -> red error)
#  - Prove your templates file is loaded and valid (templated button)

type: custom:mod-card
view_layout: { grid-area: sidebar }

card_mod:
  style: |
    :host {
      /* Tokens used by templated button if templates load */
      --sb-inactive-bg:   var(--palette-lilac);
      --sb-inactive-icon: #0F172A;
      --sb-active-bg:     var(--family-background);
      --sb-active-icon:   #0F172A;

      position: sticky; top: 8px; z-index: 2;
    }
    ha-card {
      background: var(--card-background-color);
      border-radius: var(--ha-card-border-radius, 16px);
      box-shadow: var(--ha-card-box-shadow);
      padding: 0;
    }

card:
  type: vertical-stack
  cards:
    - type: markdown
      content: "**Sidebar diagnostics v3**"

    # 1) Raw custom button — must render if button-card is loaded
    - type: custom:button-card
      name: Raw custom button (no template)
      icon: mdi:flash
      show_icon: true
      show_name: true
      styles:
        card:
          - height: 64px
          - place-items: center

    # 2) Intentional missing template — should show a red error card
    - type: custom:button-card
      name: Should show a red error if templates are active
      template: does_not_exist

    # 3) Templated button — only renders if your templates file is loaded & valid
    - type: custom:button-card
      template: family_icon
      icon: mdi:home-heart
      tap_action:
        action: none

    - type: markdown
      content: "_End of diagnostics._"
